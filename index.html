<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">–°–ø–∏—Å–æ–∫ –ø–µ—Å–µ–Ω</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background:
                radial-gradient(max(1200px, 60vmax) max(800px, 40vmax) at 10% 0%, rgba(230, 57, 70, 0.14), transparent 70%),
                radial-gradient(max(900px, 50vmax) max(700px, 35vmax) at 90% 10%, rgba(181, 61, 70, 0.14), transparent 68%),
                linear-gradient(180deg, #0f0f10 0%, #151515 40%, #1a1a1a 100%);
            color: #e8e8e8;
        }
        
        .text-gradient-red {
            background-image: linear-gradient(to right, #e63946, #b53d46);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        canvas#bgParticles {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        body > *:not(canvas#bgParticles):not(.absolute) {
            position: relative;
            z-index: 1;
        }

        #songList, #picksList { counter-reset: list-counter; }
        .song-list-item { counter-increment: list-counter; transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease; }
        .song-list-item:hover { transform: translateY(-2px); border-color: rgba(230,57,70,.5); box-shadow: 0 10px 35px rgba(230,57,70,.18); }
        .song-list-item::before {
            content: counter(list-counter);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 2.25rem;
            height: 2.25rem;
            margin-right: 1rem;
            border-radius: 9999px;
            background-image: linear-gradient(135deg, #e63946, #b53d46);
            color: #ffffff;
            font-weight: 700;
            box-shadow: 0 6px 20px rgba(230,57,70,.35);
            flex: 0 0 2.25rem;
        }

        .active-lang { background-image: linear-gradient(135deg, #e63946, #b53d46); box-shadow: 0 10px 30px rgba(230,57,70,.35); }

        .active-tab { color: #fff; }

        #langMenu { opacity: 0; transform: translateY(-8px); pointer-events: none; transition: opacity .15s ease, transform .15s ease; }
        #langMenu.open { opacity: 1; transform: translateY(0); pointer-events: auto; }
        #lang-toggle { width: 2.75rem; height: 2.75rem; }

        .tablist { position: relative; overflow: hidden; border-radius: 0.75rem; }
        #tabIndicator {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background-image: linear-gradient(135deg, #e63946, #b53d46);
            border-radius: 0.5rem;
            box-shadow: 0 10px 30px rgba(230,57,70,.35);
            transition: transform .25s ease, width .25s ease, height .25s ease;
            will-change: transform, width, height;
            z-index: 0;
            pointer-events: none;
        }
        .tab-button { position: relative; z-index: 1; }

        .fade-in { animation: fadeInUp .28s ease both; }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(6px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 480px) {
            body { padding-top: calc(4rem + constant(safe-area-inset-top)); padding-top: calc(4rem + env(safe-area-inset-top)); }
            .song-list-item { padding: 0.875rem; }
            .song-list-item::before { width: 2rem; height: 2rem; font-size: .9rem; }
        }
    </style>
</head>
<body class="p-6 md:p-12 pt-24 md:pt-32 flex flex-col items-center justify-center min-h-screen">
    <canvas id="bgParticles" aria-hidden="true"></canvas>

    <div class="absolute top-4 right-4 z-50">
        <div class="relative">
            <button id="lang-toggle" class="flex items-center justify-center rounded-full bg-gray-800 text-white shadow-lg ring-1 ring-white/10 hover:bg-gray-700 transition focus:outline-none focus:ring-2 focus:ring-red-500" aria-haspopup="true" aria-expanded="false" aria-controls="langMenu" title="–í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫">
                <span class="text-xl leading-none">üåê</span>
            </button>
            <div id="langMenu" class="absolute right-0 mt-2 w-44 bg-gray-800/95 backdrop-blur rounded-xl shadow-xl border border-white/10 p-2 origin-top-right z-50">
                <button id="lang-ru" class="w-full text-left px-3 py-3 rounded-lg text-white hover:bg-gray-700 transition">–†—É—Å—Å–∫–∏–π</button>
                <button id="lang-uk" class="w-full text-left px-3 py-3 rounded-lg text-white hover:bg-gray-700 transition">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</button>
                <button id="lang-en" class="w-full text-left px-3 py-3 rounded-lg text-white hover:bg-gray-700 transition">English</button>
            </div>
        </div>
    </div>

    <header class="text-center mb-12">
        <h1 id="mainTitle" class="text-4xl md:text-5xl font-bold text-gradient-red mb-2"></h1>
        <p id="mainDescription" class="text-lg text-gray-400 max-w-2xl mx-auto"></p>
        <p class="text-lg text-white mt-4">
            <a href="https://www.tiktok.com/@apostrof_guitarist" target="_blank" class="hover:underline text-gradient-red">@apostrof_guitarist</a>
        </p>
    </header>

    <main class="w-full max-w-2xl">
        <div id="tabsContainer" class="tablist mb-6 inline-flex gap-1 md:gap-2 rounded-xl bg-gray-900/60 p-1 ring-1 ring-white/10" role="tablist" aria-label="Song tabs">
            <div id="tabIndicator" aria-hidden="true"></div>
            <button id="tab-all" class="tab-button px-4 py-2 rounded-lg text-sm md:text-base text-white/90 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40" role="tab" aria-selected="true">–í—Å–µ –ø–µ—Å–Ω–∏</button>
            <button id="tab-picks" class="tab-button px-4 py-2 rounded-lg text-sm md:text-base text-white/90 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40" role="tab" aria-selected="false">–ú–æ–∏ –ø–æ–¥–±–æ—Ä—ã</button>
        </div>
        <section id="allSection">
            <ol id="songList" class="list-none p-0 space-y-4"></ol>
        </section>
        <section id="picksSection" class="hidden relative">
            <h2 id="picksHeader" class="text-2xl font-semibold mb-4 text-gradient-red flex items-center gap-2">
                <span id="picksHeaderText"></span>
                <a href="https://mychords.net" target="_blank" rel="noopener noreferrer" class="inline-flex items-center">
                    <img src="mychords-logo.png" alt="mychords" class="h-6 md:h-7 w-auto" />
                </a>
            </h2>
            <ol id="picksList" class="list-none p-0 space-y-4 relative"></ol>
        </section>
    </main>

    <script>
        // by apostrof_guitarist
        document.addEventListener('DOMContentLoaded', () => {
            const translations = {
                'ru': {
                    pageTitle: '–°–ø–∏—Å–æ–∫ –ø–µ—Å–µ–Ω',
                    mainTitle: '–ú–æ–π —Ä–µ–ø–µ—Ä—Ç—É–∞—Ä',
                    mainDescription: '–ü—Ä–∏–≤–µ—Ç! –í—ã–±–∏—Ä–∞–π—Ç–µ –ø–µ—Å–Ω—é –ø–æ –Ω–æ–º–µ—Ä—É –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µ.',
                    songsNotFound: '–°–ø–∏—Å–æ–∫ –ø–µ—Å–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω.',
                    songsEmpty: '–°–ø–∏—Å–æ–∫ –ø–µ—Å–µ–Ω –ø—É—Å—Ç.',
                    tabAll: '–í—Å–µ –ø–µ—Å–Ω–∏',
                    tabPicks: '–ú–æ–∏ –ø–æ–¥–±–æ—Ä—ã',
                    picksHeader: '–ú–æ–∏ –ø–æ–¥–±–æ—Ä—ã –Ω–∞',
                    picksNotFound: '–°–ø–∏—Å–æ–∫ –ø–æ–¥–±–æ—Ä–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω.',
                    picksEmpty: '–°–ø–∏—Å–æ–∫ –ø–æ–¥–±–æ—Ä–æ–≤ –ø—É—Å—Ç.'
                },
                'uk': {
                    pageTitle: '–°–ø–∏—Å–æ–∫ –ø—ñ—Å–µ–Ω—å',
                    mainTitle: '–ú—ñ–π —Ä–µ–ø–µ—Ä—Ç—É–∞—Ä',
                    mainDescription: '–ü—Ä–∏–≤—ñ—Ç! –û–±–∏—Ä–∞–π—Ç–µ –ø—ñ—Å–Ω—é –∑–∞ –Ω–æ–º–µ—Ä–æ–º –∑—ñ —Å–ø–∏—Å–∫—É –Ω–∏–∂—á–µ.',
                    songsNotFound: '–°–ø–∏—Å–æ–∫ –ø—ñ—Å–µ–Ω—å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.',
                    songsEmpty: '–°–ø–∏—Å–æ–∫ –ø—ñ—Å–µ–Ω—å –ø–æ—Ä–æ–∂–Ω—ñ–π.',
                    tabAll: '–í—Å—ñ –ø—ñ—Å–Ω—ñ',
                    tabPicks: '–ú–æ—ó –∞–∫–æ—Ä–¥–∏/—Ç–∞–±–∏',
                    picksHeader: '–ú–æ—ó –∞–∫–æ—Ä–¥–∏/—Ç–∞–±–∏ –Ω–∞',
                    picksNotFound: '–°–ø–∏—Å–æ–∫ –ø—ñ–¥–±–æ—Ä—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.',
                    picksEmpty: '–°–ø–∏—Å–æ–∫ –ø—ñ–¥–±–æ—Ä—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π.'
                },
                'en': {
                    pageTitle: 'Song List',
                    mainTitle: 'My Repertoire',
                    mainDescription: 'Hey! Choose a song by number from the list below.',
                    songsNotFound: 'Song list not found.',
                    songsEmpty: 'Song list is empty.',
                    tabAll: 'All songs',
                    tabPicks: 'My chords/tabs',
                    picksHeader: 'My chords/tabs on',
                    picksNotFound: 'Picks list not found.',
                    picksEmpty: 'Picks list is empty.'
                }
            };

            const listElement = document.getElementById('songList');
            const picksList = document.getElementById('picksList');
            const allSection = document.getElementById('allSection');
            const picksSection = document.getElementById('picksSection');
            const tabAll = document.getElementById('tab-all');
            const tabPicks = document.getElementById('tab-picks');
            const tabsContainer = document.getElementById('tabsContainer');
            const tabIndicator = document.getElementById('tabIndicator');
            const picksHeaderEl = document.getElementById('picksHeader');

            let lastTextContent = null;
            let currentTab = (() => { try { return localStorage.getItem('tab') || 'all'; } catch(e) { return 'all'; } })();

            function moveIndicatorTo(element) {
                if (!tabsContainer || !tabIndicator || !element) return;
                const containerRect = tabsContainer.getBoundingClientRect();
                const elRect = element.getBoundingClientRect();
                const offsetLeft = elRect.left - containerRect.left;
                const offsetTop = elRect.top - containerRect.top;
                tabIndicator.style.transform = `translate(${offsetLeft}px, ${offsetTop}px)`;
                tabIndicator.style.width = `${elRect.width}px`;
                tabIndicator.style.height = `${elRect.height}px`;
                tabIndicator.style.borderRadius = window.getComputedStyle(element).borderRadius || '0.5rem';
            }

            function setActiveTab(tab) {
                currentTab = tab;
                try { localStorage.setItem('tab', tab); } catch (e) {}
                if (tab === 'all') {
                    tabAll?.classList.add('active-tab');
                    tabPicks?.classList.remove('active-tab');
                    allSection?.classList.remove('hidden');
                    picksSection?.classList.add('hidden');
                    if (allSection) {
                        allSection.classList.remove('fade-in');
                        void allSection.offsetWidth;
                        allSection.classList.add('fade-in');
                    }
                    moveIndicatorTo(tabAll);
                } else {
                    tabPicks?.classList.add('active-tab');
                    tabAll?.classList.remove('active-tab');
                    picksSection?.classList.remove('hidden');
                    allSection?.classList.add('hidden');
                    if (picksSection) {
                        picksSection.classList.remove('fade-in');
                        void picksSection.offsetWidth;
                        picksSection.classList.add('fade-in');
                    }
                    moveIndicatorTo(tabPicks);
                }
                if (lastTextContent) {
                    renderCurrentTab(lastTextContent);
                }
            }

            async function renderAllSongs(textContent) {
                let songs = [];
                try {
                    const response = await fetch('songs.txt');
                    if (!response.ok) {
                        throw new Error(`Failed to load songs.txt: ${response.statusText}`);
                    }
                    const text = await response.text();
                    songs = text.split('\n')
                        .map(line => line.trim())
                        .filter(line => line.length > 0)
                        .map(line => {
                            const parts = line.split(' - ');
                            if (parts.length >= 2) {
                                return {
                                    artist: parts[0].trim(),
                                    title: parts.slice(1).join(' - ').trim()
                                };
                            }
                            return null;
                        })
                        .filter(song => song !== null);
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ songs.txt. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.', error);
                    listElement.innerHTML = `<li class="text-red-500 text-center">${textContent.songsNotFound}</li>`;
                    return;
                }

                listElement.innerHTML = '';
                if (songs.length === 0) {
                    listElement.innerHTML = `<li class="text-red-500 text-center">${textContent.songsEmpty}</li>`;
                } else {
                    songs.forEach(song => {
                        const listItem = document.createElement('li');
                        listItem.className = 'bg-gray-800/70 backdrop-blur rounded-2xl p-4 md:p-5 shadow-[0_8px_30px_rgba(0,0,0,0.12)] border border-white/10 flex items-center song-list-item';
                        listItem.innerHTML = `
                            <span class="text-xl text-white font-semibold flex-1">
                                ${song.title} - <span class="text-gray-400 font-normal">${song.artist}</span>
                            </span>
                        `;
                        listElement.appendChild(listItem);
                    });
                }
            }

            async function renderPicks(textContent) {
                if (!picksList) return;
                let picks = [];
                try {
                    const response = await fetch('mychords.txt');
                    if (!response.ok) {
                        throw new Error(`Failed to load mychords.txt: ${response.statusText}`);
                    }
                    const text = await response.text();
                    picks = text.split('\n')
                        .map(line => line.trim())
                        .filter(line => line.length > 0)
                        .map(line => {
                            const m = line.match(/^\s*(.+?)\s*-\s*(.+?)\s*\[(.+?)\]\s*$/);
                            if (m) {
                                return { artist: m[1].trim(), title: m[2].trim(), url: m[3].trim() };
                            }
                            return null;
                        })
                        .filter(item => item !== null);
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ mychords.txt. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.', error);
                    picksList.innerHTML = `<li class="text-red-500 text-center">${textContent.picksNotFound}</li>`;
                    return;
                }

                picksList.innerHTML = '';
                if (picks.length === 0) {
                    picksList.innerHTML = `<li class="text-red-500 text-center">${textContent.picksEmpty}</li>`;
                } else {
                    picks.forEach(p => {
                        const listItem = document.createElement('li');
                        listItem.className = 'bg-gray-800/70 backdrop-blur rounded-2xl p-4 md:p-5 shadow-[0_8px_30px_rgba(0,0,0,0.12)] border border-white/10 flex items-center song-list-item';
                        listItem.innerHTML = `
                            <a href="${p.url}" target="_blank" rel="noopener noreferrer" class="flex items-center w-full">
                                <span class="text-xl text-white font-semibold flex-1">
                                    ${p.title} - <span class="text-gray-400 font-normal">${p.artist}</span>
                                </span>
                            </a>
                        `;
                        picksList.appendChild(listItem);
                    });
                }
            }

            function renderCurrentTab(textContent) {
                if (currentTab === 'all') {
                    const p = renderAllSongs(textContent);
                    if (allSection) {
                        allSection.classList.remove('fade-in');
                        void allSection.offsetWidth;
                        allSection.classList.add('fade-in');
                    }
                    return p;
                }
                const p = renderPicks(textContent);
                if (picksSection) {
                    picksSection.classList.remove('fade-in');
                    void picksSection.offsetWidth;
                    picksSection.classList.add('fade-in');
                }
                return p;
            }

            async function updateUI(lang) {
                const textContent = translations[lang] || translations['ru'];

                try { localStorage.setItem('lang', lang); } catch (e) {}

                document.getElementById('pageTitle').textContent = textContent.pageTitle;
                document.getElementById('mainTitle').textContent = textContent.mainTitle;
                document.getElementById('mainDescription').textContent = textContent.mainDescription;

                lastTextContent = textContent;

                if (tabAll) tabAll.textContent = textContent.tabAll;
                if (tabPicks) tabPicks.textContent = textContent.tabPicks;
                if (picksHeaderEl) {
                    const picksHeaderText = document.getElementById('picksHeaderText');
                    if (picksHeaderText) picksHeaderText.textContent = textContent.picksHeader + ' ';
                }

                setActiveLangButton(lang);
                setActiveTab(currentTab);
            }

            function setActiveLangButton(lang) {
                ['ru','uk','en'].forEach(code => {
                    const btn = document.getElementById('lang-' + code);
                    if (!btn) return;
                    if (code === lang) {
                        btn.classList.add('active-lang','ring-2','ring-red-500');
                    } else {
                        btn.classList.remove('active-lang','ring-2','ring-red-500');
                    }
                });
            }

            // by apostrof_guitarist
            const langToggle = document.getElementById('lang-toggle');
            const langMenu = document.getElementById('langMenu');

            function openMenu() {
                if (!langMenu) return;
                langMenu.classList.add('open');
                langToggle?.setAttribute('aria-expanded','true');
            }
            function closeMenu() {
                if (!langMenu) return;
                langMenu.classList.remove('open');
                langToggle?.setAttribute('aria-expanded','false');
            }
            function toggleMenu() {
                if (!langMenu) return;
                if (langMenu.classList.contains('open')) closeMenu(); else openMenu();
            }

            langToggle?.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleMenu();
            });

            document.getElementById('lang-ru').addEventListener('click', () => { updateUI('ru'); closeMenu(); });
            document.getElementById('lang-uk').addEventListener('click', () => { updateUI('uk'); closeMenu(); });
            document.getElementById('lang-en').addEventListener('click', () => { updateUI('en'); closeMenu(); });

            document.addEventListener('click', (e) => {
                if (!langMenu) return;
                if (!langMenu.contains(e.target) && e.target !== langToggle) {
                    closeMenu();
                }
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeMenu();
            });

            tabAll?.addEventListener('click', () => { setActiveTab('all'); });
            tabPicks?.addEventListener('click', () => { setActiveTab('picks'); });

            function initIndicator() {
                if (!tabIndicator || !tabsContainer) return;
                const activeBtn = currentTab === 'all' ? tabAll : tabPicks;
                if (activeBtn) {
                    const rect = activeBtn.getBoundingClientRect();
                    tabIndicator.style.width = `${rect.width}px`;
                    tabIndicator.style.height = `${rect.height}px`;
                }
                moveIndicatorTo(currentTab === 'all' ? tabAll : tabPicks);
            }

            window.addEventListener('resize', () => {
                moveIndicatorTo(currentTab === 'all' ? tabAll : tabPicks);
            });

            const savedLang = (() => { try { return localStorage.getItem('lang'); } catch(e) { return null; } })();

            const prefs = (Array.isArray(navigator.languages) && navigator.languages.length ? navigator.languages : [navigator.language]).filter(Boolean);

            function normalizeLang(code) {
                const base = String(code || '').toLowerCase().split('-')[0];
                if (base === 'ua') return 'uk';
                return base;
            }

            const initialLang = translations[savedLang] ? savedLang : (() => {
                for (const p of prefs) {
                    const c = normalizeLang(p);
                    if (translations[c]) return c;
                }
                return 'en';
            })();

            updateUI(initialLang);
            // by apostrof_guitarist
            requestAnimationFrame(initIndicator);

            const particlesCanvas = document.getElementById('bgParticles');
            if (particlesCanvas && particlesCanvas.getContext) {
                const ctx = particlesCanvas.getContext('2d');
                let canvasWidth = 0;
                let canvasHeight = 0;
                let devicePixelRatioSafe = Math.max(1, Math.floor(window.devicePixelRatio || 1));

                function resizeCanvas() {
                    devicePixelRatioSafe = Math.max(1, Math.floor(window.devicePixelRatio || 1));
                    const cssWidth = window.innerWidth;
                    const cssHeight = window.innerHeight;
                    canvasWidth = Math.floor(cssWidth * devicePixelRatioSafe);
                    canvasHeight = Math.floor(cssHeight * devicePixelRatioSafe);
                    particlesCanvas.width = canvasWidth;
                    particlesCanvas.height = canvasHeight;
                    particlesCanvas.style.width = cssWidth + 'px';
                    particlesCanvas.style.height = cssHeight + 'px';
                    ctx.setTransform(devicePixelRatioSafe, 0, 0, devicePixelRatioSafe, 0, 0);
                }

                const prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                const targetCount = Math.min(140, Math.max(60, Math.floor((window.innerWidth * window.innerHeight) / 18000)));
                const particles = [];

                function random(min, max) { return Math.random() * (max - min) + min; }

                function createParticle() {
                    const size = random(1.0, 2.6);
                    const speed = random(0.08, 0.35) * (size / 2.6);
                    return {
                        x: random(0, window.innerWidth),
                        y: random(0, window.innerHeight),
                        vx: random(-0.05, 0.05),
                        vy: -speed,
                        size,
                        alpha: random(0.25, 0.75)
                    };
                }

                function seedParticles() {
                    particles.length = 0;
                    for (let i = 0; i < targetCount; i++) particles.push(createParticle());
                }

                function wrap(p) {
                    const margin = 24;
                    const w = window.innerWidth;
                    const h = window.innerHeight;
                    if (p.x < -margin) p.x = w + margin;
                    if (p.x > w + margin) p.x = -margin;
                    if (p.y < -margin) p.y = h + margin;
                    if (p.y > h + margin) p.y = -margin;
                }

                function drawFrame() {
                    ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
                    for (let i = 0; i < particles.length; i++) {
                        const p = particles[i];
                        p.x += p.vx;
                        p.y += p.vy;
                        wrap(p);
                        ctx.beginPath();
                        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(230, 57, 70, ${p.alpha})`;
                        ctx.fill();
                    }
                }

                let running = !document.hidden && !prefersReducedMotion;
                function tick() {
                    if (!running) return;
                    drawFrame();
                    requestAnimationFrame(tick);
                }

                window.addEventListener('resize', () => {
                    resizeCanvas();
                });
                document.addEventListener('visibilitychange', () => {
                    running = !document.hidden && !prefersReducedMotion;
                    if (running) requestAnimationFrame(tick);
                });

                resizeCanvas();
                seedParticles();
                if (!prefersReducedMotion) {
                    requestAnimationFrame(tick);
                } else {
                    drawFrame();
                }
            }
        });
    </script>
</body>
</html>
